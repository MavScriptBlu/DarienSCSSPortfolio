<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta
      name="description"
      content="Darien Johnas - Software Developer Portfolio. Showcasing web development projects and skills in React, Node.js, and modern JavaScript."
    />
    <title>Darien Johnas – Web Development Portfolio</title>
    <link rel="stylesheet" href="./dist/main.css" />
    <link
      href="https://fonts.googleapis.com/css2?family=VT323&display=swap"
      rel="stylesheet"
    />
  </head>

  <body id="body">
    <header class="header" role="banner">
      <div class="header__container">
        <h1>Darien Johnas</h1>
        <nav class="nav" role="navigation" aria-label="Main navigation">
          <a
            href="#main"
            class="nav__logo nav__skip"
            aria-label="Skip to main content"
          >
            <img
              src="./src/img/DevLogo.gif"
              alt="Darien.dev Logo - Skip to main content"
              class="nav__logo-img"
            />
          </a>
          <button
            class="nav__menu-toggle"
            aria-label="Toggle navigation menu"
            aria-expanded="false"
          >
            <span class="nav__menu-toggle__lines"></span>
          </button>
          <ul class="nav__list">
            <li class="nav__item">
              <a href="#projects" aria-describedby="projects-section"
                >Projects</a
              >
            </li>
            <li class="nav__item"><a href="#skills">Skills</a></li>
            <li class="nav__item"><a href="#resume">Resume</a></li>
            <li class="nav__item"><a href="#contact">Contact</a></li>
          </ul>
        </nav>
      </div>
    </header>

    <main id="main" role="main">
      <section id="bio" class="intro-banner" aria-labelledby="intro-heading">
        <div class="intro-content">
          <img
            src="./src/img/profileAvatar.png"
            alt="Professional photo of Darien Johnas, software developer"
          />
          <div class="intro-text">
            <h2 id="intro-heading">About Darien Johnas</h2>
            <p>
              Passionate software developer with expertise in full-stack web
              development and modern JavaScript frameworks. I create innovative
              applications including weather-based clothing recommendations,
              responsive platforms, and robust backend APIs. Currently building
              my skills through TripleTen's Software Engineering program while
              developing real-world projects with React, Node.js, and MongoDB.
            </p>
            <div class="intro-actions">
              <a href="#resume" class="btn" role="button">Resume</a>
              <a href="#skills" class="btn" role="button">Skills</a>
            </div>
          </div>
        </div>
      </section>

      <section
        id="projects"
        class="projects"
        aria-labelledby="projects-heading"
      >
        <h2 id="projects-heading">Latest Projects</h2>
        <div class="project-cards">
          <article class="card">
            <img
              src="./src/img/todo-app.jpeg"
              alt="Preview of ToDo App project showing task management interface"
            />
            <h3>ToDo App</h3>
            <p>A simple and intuitive task management app built with React.</p>
            <a href="https://github.com/iiBamBlue/todo-app" target="_blank" rel="noopener noreferrer" aria-label="View ToDo App project on GitHub">View Project</a>
          </article>

          <article class="card">
            <img
              src="./src/img/wtwrProjectDesktop.jpeg"
              alt="Preview of WTWR project showing weather-based clothing recommendations interface"
            />
            <h3>WTWR – What to Wear Right Now</h3>
            <p>
              React app with weather-based outfit suggestions, modals, and
              responsive toggles.
            </p>
            <a href="https://github.com/iiBamBlue/wtwr-app" target="_blank" rel="noopener noreferrer" aria-label="View WTWR project on GitHub">View Project</a>
          </article>
          <article class="card">
            <img
              src="./src/img/spotsProjectDesktopView.png"
              alt="Preview of Spots Platform project showing responsive social media interface"
            />
            <h3>Spots Platform</h3>
            <p>
              Responsive layout with Webpack optimization, hover effects, and
              form validation.
            </p>
            <a href="https://github.com/iiBamBlue/spots-platform" target="_blank" rel="noopener noreferrer" aria-label="View Spots Platform project on GitHub">View Project</a>
          </article>
          <article class="card">
            <img
              src="./src/img/craftandbrew.jpeg"
              alt="Preview of Craft and Brew project showing modern coffee shop website design"
            />
            <h3>Craft and Brew</h3>
            <p>
              A responsive coffee shop website with modern design, interactive
              menu, and reservation system.
            </p>
            <a
              href="https://iibamblue.github.io/se_project_coffeeshop/"
              target="_blank"
              rel="noopener noreferrer"
              aria-label="View Craft and Brew live website"
              >View Live Site</a
            >
          </article>
        </div>
        <a
          href="https://github.com/iiBamBlue"
          class="btn"
          role="button"
          target="_blank"
          rel="noopener noreferrer"
          aria-label="View all projects on GitHub"
          >View All Projects</a
        >
      </section>

      <section id="skills" class="skills" aria-labelledby="skills-heading">
        <h2 id="skills-heading">Skills & Technologies</h2>
        <div class="skills-grid">
          <div class="skill-category">
            <h3>Frontend</h3>
            <ul>
              <li>HTML5 & CSS3</li>
              <li>JavaScript (ES6+)</li>
              <li>React</li>
              <li>SCSS/Sass</li>
              <li>Responsive Design</li>
            </ul>
          </div>
          <div class="skill-category">
            <h3>Backend</h3>
            <ul>
              <li>Node.js</li>
              <li>Express.js</li>
              <li>MongoDB</li>
              <li>REST APIs</li>
              <li>Authentication</li>
            </ul>
          </div>
          <div class="skill-category">
            <h3>Tools & Others</h3>
            <ul>
              <li>Git & GitHub</li>
              <li>Webpack</li>
              <li>npm/yarn</li>
              <li>VS Code</li>
              <li>Figma</li>
            </ul>
          </div>
        </div>
      </section>

      <section id="resume" class="resume" aria-labelledby="resume-heading">
        <h2 id="resume-heading">Resume</h2>
        <div class="resume-content">
          <div class="resume-section">
            <h3>Education</h3>
            <div class="resume-item">
              <h4>TripleTen Bootcamp United States</h4>
              <p class="duration">Sep 2024 – Sep 2025</p>
              <p>
                Software Engineer | Student Developer - Built responsive web
                apps using React, HTML, and CSS with a focus on accessibility
                and performance. Integrated RESTful APIs and implemented dynamic
                features using JavaScript and TypeScript. Completed
                certifications in Front-End Engineering, SQL, and HTML/CSS.
                Participated in Agile sprints, contributing to planning,
                testing, and deployment cycles.
              </p>
            </div>
            <div class="resume-item">
              <h4>Udacity / OneTen Scholarship Program</h4>
              <p class="duration">May 2025 – Sep 2025</p>
              <p>Frontend Web Development Fundamentals — NanoDegree</p>
            </div>
          </div>
          <div class="resume-section">
            <h3>Experience</h3>
            <div class="resume-item">
              <h4>Production Supervisor & Maintenance Innovator</h4>
              <p class="duration">Jun 2024 – Aug 2024</p>
              <p class="company">Piper Products, Inc., Wausau, WI</p>
              <p>
                Led process optimizations that enhanced production efficiency
                and reduced downtime. Developed custom maintenance scheduling
                systems to extend equipment lifespan. Streamlined quality
                control procedures, improving reliability—parallels with
                frontend testing and QA.
              </p>
            </div>
            <div class="resume-item">
              <h4>Fabrication Lead & Multi-Skilled Trainer</h4>
              <p class="duration">Sep 2023 – May 2024</p>
              <p class="company">
                Crystal Finishing Systems, Inc., Mosinee, WI
              </p>
              <p>
                Created real-time monitoring systems and training documentation
                – skills transferable to frontend dashboards and onboarding
                flows. Spearheaded cross-training initiatives, displaying clear
                communication and scalable knowledge sharing.
              </p>
            </div>
          </div>
          <a
            href="./src/assets/Darien-Johnas-Resume.pdf"
            class="btn download-btn"
            aria-label="View resume PDF in new window"
            target="_blank"
            rel="noopener noreferrer"
            >View Resume PDF</a
          >
        </div>
      </section>

      <section id="contact" class="contact" aria-labelledby="contact-heading">
        <h2 id="contact-heading">Get In Touch</h2>
        <div class="contact-content">
          <p>
            I'm always interested in new opportunities and collaborations. 
            Feel free to reach out using the form below or connect with me on social media.
          </p>
          
          <!-- Contact Form -->
          <form class="contact-form" action="#" method="post" novalidate aria-labelledby="form-heading">
            <h3 id="form-heading">Send me a message</h3>
            
            <div class="form-group">
              <label for="contact-name" class="form-label">
                Name <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="text" 
                id="contact-name" 
                name="name" 
                class="form-input" 
                required 
                aria-describedby="name-error"
                autocomplete="name"
              />
              <div id="name-error" class="error-message" role="alert" aria-live="polite"></div>
            </div>

            <div class="form-group">
              <label for="contact-email" class="form-label">
                Email <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="email" 
                id="contact-email" 
                name="email" 
                class="form-input" 
                required 
                aria-describedby="email-error email-help"
                autocomplete="email"
              />
              <div id="email-help" class="help-text">I'll use this to respond to your message</div>
              <div id="email-error" class="error-message" role="alert" aria-live="polite"></div>
            </div>

            <div class="form-group">
              <label for="contact-subject" class="form-label">
                Subject <span class="required" aria-label="required">*</span>
              </label>
              <input 
                type="text" 
                id="contact-subject" 
                name="subject" 
                class="form-input" 
                required 
                aria-describedby="subject-error"
                placeholder="e.g., Job Opportunity, Collaboration, Question"
              />
              <div id="subject-error" class="error-message" role="alert" aria-live="polite"></div>
            </div>

            <div class="form-group">
              <label for="contact-message" class="form-label">
                Message <span class="required" aria-label="required">*</span>
              </label>
              <textarea 
                id="contact-message" 
                name="message" 
                class="form-textarea" 
                rows="6" 
                required 
                aria-describedby="message-error message-help"
                placeholder="Tell me about your project, opportunity, or question..."
              ></textarea>
              <div id="message-help" class="help-text">Minimum 10 characters required</div>
              <div id="message-error" class="error-message" role="alert" aria-live="polite"></div>
            </div>

            <div class="form-actions">
              <button type="submit" class="btn btn-primary" aria-describedby="submit-help">
                Send Message
              </button>
              <button type="reset" class="btn btn-secondary">
                Clear Form
              </button>
            </div>
            
            <div id="submit-help" class="help-text">
              Form submissions are processed securely. Your information will not be shared.
            </div>
          </form>

          <!-- Social Links -->
          <div class="contact-links" role="group" aria-labelledby="social-heading">
            <h3 id="social-heading">Connect with me</h3>
            <div class="social-links">
              <a
                href="mailto:darien.johnas@example.com"
                class="contact-link"
                aria-label="Send email to Darien at darien.johnas@example.com"
              >
                <span class="contact-link__text">Email</span>
              </a>
              <a
                href="https://www.linkedin.com/in/darien-blue"
                class="contact-link"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Visit Darien's LinkedIn profile (opens in new window)"
              >
                <span class="contact-link__text">LinkedIn</span>
              </a>
              <a
                href="https://github.com/iiBamBlue"
                class="contact-link"
                target="_blank"
                rel="noopener noreferrer"
                aria-label="Visit Darien's GitHub profile (opens in new window)"
              >
                <span class="contact-link__text">GitHub</span>
              </a>
            </div>
          </div>
        </div>
      </section>
    </main>

    <footer class="footer" role="contentinfo">
      <p>&copy; Darien Johnas 2025</p>
    </footer>

    <script>
      // Mobile menu toggle
      const menuToggle = document.querySelector('.nav__menu-toggle');
      const navList = document.querySelector('.nav__list');

      if (menuToggle && navList) {
        menuToggle.addEventListener('click', function () {
          const isOpen = navList.classList.contains('open');
          navList.classList.toggle('open');
          menuToggle.setAttribute('aria-expanded', !isOpen);
        });

        // Close menu when clicking on a link
        const navLinks = document.querySelectorAll('.nav__item a');
        navLinks.forEach(link => {
          link.addEventListener('click', () => {
            navList.classList.remove('open');
            menuToggle.setAttribute('aria-expanded', false);
          });
        });
      }

      // Contact Form Validation and Accessibility
      const contactForm = document.querySelector('.contact-form');
      if (contactForm) {
        const nameInput = document.getElementById('contact-name');
        const emailInput = document.getElementById('contact-email');
        const subjectInput = document.getElementById('contact-subject');
        const messageInput = document.getElementById('contact-message');
        
        // Real-time validation functions
        function validateName() {
          const value = nameInput.value.trim();
          const errorElement = document.getElementById('name-error');
          
          if (value.length < 2) {
            showError(nameInput, errorElement, 'Name must be at least 2 characters long');
            return false;
          }
          
          showSuccess(nameInput, errorElement);
          return true;
        }
        
        function validateEmail() {
          const value = emailInput.value.trim();
          const errorElement = document.getElementById('email-error');
          const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
          
          if (!emailPattern.test(value)) {
            showError(emailInput, errorElement, 'Please enter a valid email address');
            return false;
          }
          
          showSuccess(emailInput, errorElement);
          return true;
        }
        
        function validateSubject() {
          const value = subjectInput.value.trim();
          const errorElement = document.getElementById('subject-error');
          
          if (value.length < 3) {
            showError(subjectInput, errorElement, 'Subject must be at least 3 characters long');
            return false;
          }
          
          showSuccess(subjectInput, errorElement);
          return true;
        }
        
        function validateMessage() {
          const value = messageInput.value.trim();
          const errorElement = document.getElementById('message-error');
          
          if (value.length < 10) {
            showError(messageInput, errorElement, 'Message must be at least 10 characters long');
            return false;
          }
          
          showSuccess(messageInput, errorElement);
          return true;
        }
        
        function showError(input, errorElement, message) {
          input.classList.add('input-error');
          input.classList.remove('input-success');
          input.parentElement.classList.add('has-error');
          input.parentElement.classList.remove('has-success');
          errorElement.textContent = message;
          input.setAttribute('aria-invalid', 'true');
        }
        
        function showSuccess(input, errorElement) {
          input.classList.remove('input-error');
          input.classList.add('input-success');
          input.parentElement.classList.remove('has-error');
          input.parentElement.classList.add('has-success');
          errorElement.textContent = '';
          input.setAttribute('aria-invalid', 'false');
        }
        
        // Add real-time validation
        nameInput.addEventListener('blur', validateName);
        emailInput.addEventListener('blur', validateEmail);
        subjectInput.addEventListener('blur', validateSubject);
        messageInput.addEventListener('blur', validateMessage);
        
        // Form submission
        contactForm.addEventListener('submit', function(e) {
          e.preventDefault();
          
          // Validate all fields
          const isNameValid = validateName();
          const isEmailValid = validateEmail();
          const isSubjectValid = validateSubject();
          const isMessageValid = validateMessage();
          
          if (isNameValid && isEmailValid && isSubjectValid && isMessageValid) {
            // Show loading state
            contactForm.classList.add('form-submitting');
            const submitBtn = contactForm.querySelector('.btn-primary');
            const originalText = submitBtn.textContent;
            submitBtn.setAttribute('aria-busy', 'true');
            
            // Simulate form submission (replace with actual form submission)
            setTimeout(() => {
              contactForm.classList.remove('form-submitting');
              contactForm.reset();
              
              // Show success message
              const successMessage = document.createElement('div');
              successMessage.className = 'form-success';
              successMessage.textContent = 'Thank you! Your message has been sent successfully.';
              successMessage.setAttribute('role', 'alert');
              successMessage.setAttribute('aria-live', 'polite');
              
              contactForm.insertBefore(successMessage, contactForm.firstChild);
              
              // Remove success message after 5 seconds
              setTimeout(() => {
                if (successMessage.parentElement) {
                  successMessage.remove();
                }
              }, 5000);
              
              submitBtn.setAttribute('aria-busy', 'false');
              
              // Clear validation states
              const inputs = contactForm.querySelectorAll('.form-input, .form-textarea');
              inputs.forEach(input => {
                input.classList.remove('input-error', 'input-success');
                input.parentElement.classList.remove('has-error', 'has-success');
                input.setAttribute('aria-invalid', 'false');
              });
              
              // Clear error messages
              const errorElements = contactForm.querySelectorAll('.error-message');
              errorElements.forEach(element => {
                element.textContent = '';
              });
            }, 2000);
          } else {
            // Focus on first invalid field
            const firstInvalidField = contactForm.querySelector('.input-error');
            if (firstInvalidField) {
              firstInvalidField.focus();
            }
          }
        });
        
        // Reset form handler
        contactForm.addEventListener('reset', function() {
          const inputs = contactForm.querySelectorAll('.form-input, .form-textarea');
          inputs.forEach(input => {
            input.classList.remove('input-error', 'input-success');
            input.parentElement.classList.remove('has-error', 'has-success');
            input.setAttribute('aria-invalid', 'false');
          });
          
          const errorElements = contactForm.querySelectorAll('.error-message');
          errorElements.forEach(element => {
            element.textContent = '';
          });
        });
      }

      // Smooth scrolling for anchor links
      document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener('click', function (e) {
          e.preventDefault();
          const target = document.querySelector(this.getAttribute('href'));
          if (target) {
            target.scrollIntoView({
              behavior: 'smooth',
              block: 'start',
            });
            
            // Ensure focus moves to target for keyboard users
            if (target.hasAttribute('tabindex') || target.tagName === 'INPUT' || target.tagName === 'TEXTAREA' || target.tagName === 'BUTTON') {
              target.focus();
            }
          }
        });
      });

      // Enhanced keyboard navigation
      document.addEventListener('keydown', function(e) {
        // Handle escape key to close mobile menu
        if (e.key === 'Escape' && navList && navList.classList.contains('open')) {
          navList.classList.remove('open');
          menuToggle.setAttribute('aria-expanded', 'false');
          menuToggle.focus();
        }
        
        // Handle enter key for button-like elements
        if (e.key === 'Enter' && e.target.getAttribute('role') === 'button') {
          e.target.click();
        }
      });

      // Header shrinking on scroll
      let lastScrollY = window.scrollY;
      const header = document.querySelector('.header');

      window.addEventListener('scroll', () => {
        if (window.scrollY > 50) {
          header.classList.add('shrunk');
        } else {
          header.classList.remove('shrunk');
        }
        lastScrollY = window.scrollY;
      });

      // Modern page lifecycle management using pagehide/pageshow
      // This is more reliable than the deprecated 'unload' event

      // Generate unique session ID for analytics
      const sessionId =
        'session_' + Date.now() + '_' + Math.random().toString(36).substr(2, 9);
      const pageLoadTime = Date.now();

      function savePortfolioState() {
        // Save any portfolio state to localStorage
        const portfolioState = {
          scrollPosition: window.scrollY,
          activeSection:
            document.querySelector('section:target')?.id || getCurrentSection(),
          timestamp: Date.now(),
          sessionId: sessionId,
        };
        localStorage.setItem('portfolioState', JSON.stringify(portfolioState));
      }

      function getCurrentSection() {
        // Determine current section based on scroll position
        const sections = document.querySelectorAll('section, main > div');
        let currentSection = 'intro';

        sections.forEach(section => {
          const rect = section.getBoundingClientRect();
          if (rect.top <= 200 && rect.bottom > 200) {
            currentSection =
              section.id || section.className.split(' ')[0] || 'intro';
          }
        });

        return currentSection;
      }

      function restorePortfolioState() {
        try {
          const savedState = localStorage.getItem('portfolioState');
          if (savedState) {
            const state = JSON.parse(savedState);
            // Only restore if saved recently (within 30 minutes)
            if (Date.now() - state.timestamp < 1800000) {
              // Restore scroll position with smooth behavior
              setTimeout(() => {
                window.scrollTo({
                  top: state.scrollPosition,
                  behavior: 'smooth',
                });
              }, 100);
            }
          }
        } catch (error) {
          console.warn('Failed to restore portfolio state:', error);
        }
      }

      // Beacon API for reliable logging and analytics
      function sendAnalyticsBeacon(eventType, data = {}) {
        const analyticsData = {
          sessionId: sessionId,
          timestamp: Date.now(),
          eventType: eventType,
          url: window.location.href,
          userAgent: navigator.userAgent,
          viewport: {
            width: window.innerWidth,
            height: window.innerHeight,
          },
          ...data,
        };

        // Use Beacon API for reliable delivery even during page unload
        if (navigator.sendBeacon) {
          // In a real app, this would go to your analytics endpoint
          const blob = new Blob([JSON.stringify(analyticsData)], {
            type: 'application/json',
          });

          // For demo purposes, we'll use a placeholder endpoint
          // Replace with your actual logging endpoint
          console.log('Analytics beacon:', analyticsData);

          // Example of actual beacon usage:
          // navigator.sendBeacon('/api/analytics', blob);
        } else {
          // Fallback for older browsers
          fetch('/api/analytics', {
            method: 'POST',
            body: JSON.stringify(analyticsData),
            headers: { 'Content-Type': 'application/json' },
            keepalive: true,
          }).catch(error => console.warn('Analytics fallback failed:', error));
        }
      }

      // Track page engagement and interactions
      let engagementData = {
        scrollDepth: 0,
        timeOnPage: 0,
        interactionCount: 0,
        sectionsVisited: new Set(),
      };

      // Use pagehide instead of deprecated unload event
      window.addEventListener('pagehide', event => {
        // Calculate final engagement metrics
        const finalEngagement = {
          ...engagementData,
          timeOnPage: Date.now() - pageLoadTime,
          scrollDepth: Math.max(
            engagementData.scrollDepth,
            (window.scrollY /
              (document.body.scrollHeight - window.innerHeight)) *
              100
          ),
          sectionsVisited: Array.from(engagementData.sectionsVisited),
          exitType: event.persisted ? 'bfcache' : 'unload',
        };

        // Send analytics beacon (non-blocking)
        sendAnalyticsBeacon('page_exit', finalEngagement);

        if (!event.persisted) {
          // Page is being unloaded (not going to BFCache)
          savePortfolioState();
        }
      });

      // Restore state when page is shown (including from BFCache)
      window.addEventListener('pageshow', event => {
        if (event.persisted) {
          // Page was restored from BFCache
          restorePortfolioState();
          sendAnalyticsBeacon('page_restore_bfcache');
        } else {
          // Fresh page load
          sendAnalyticsBeacon('page_load');
        }
      });

      // Track visibility changes (tab switches, minimizing)
      document.addEventListener('visibilitychange', () => {
        if (document.visibilityState === 'hidden') {
          // Lightweight save when tab becomes hidden
          savePortfolioState();
          sendAnalyticsBeacon('tab_hidden', {
            timeVisible: Date.now() - pageLoadTime,
            currentSection: getCurrentSection(),
          });
        } else if (document.visibilityState === 'visible') {
          sendAnalyticsBeacon('tab_visible');
        }
      });

      // Enhanced scroll tracking with debouncing
      let saveStateTimeout;
      let scrollAnalyticsTimeout;

      window.addEventListener(
        'scroll',
        () => {
          // Update engagement data
          const scrollPercent =
            (window.scrollY /
              (document.body.scrollHeight - window.innerHeight)) *
            100;
          engagementData.scrollDepth = Math.max(
            engagementData.scrollDepth,
            scrollPercent
          );
          engagementData.sectionsVisited.add(getCurrentSection());

          // Debounced state saving
          clearTimeout(saveStateTimeout);
          saveStateTimeout = setTimeout(savePortfolioState, 500);

          // Debounced analytics (less frequent than state saving)
          clearTimeout(scrollAnalyticsTimeout);
          scrollAnalyticsTimeout = setTimeout(() => {
            sendAnalyticsBeacon('scroll_milestone', {
              scrollDepth: Math.round(scrollPercent),
              currentSection: getCurrentSection(),
            });
          }, 2000);
        },
        { passive: true }
      );

      // Track user interactions
      document.addEventListener('click', event => {
        engagementData.interactionCount++;

        const target = event.target.closest('a, button, .nav__item');
        if (target) {
          sendAnalyticsBeacon('interaction', {
            elementType: target.tagName.toLowerCase(),
            elementText: target.textContent?.trim().substring(0, 50),
            elementClass: target.className,
            currentSection: getCurrentSection(),
          });
        }
      });

      // Performance monitoring
      window.addEventListener('load', () => {
        // Send performance metrics
        if (performance.getEntriesByType) {
          const perfData = performance.getEntriesByType('navigation')[0];
          if (perfData) {
            sendAnalyticsBeacon('performance', {
              loadTime: perfData.loadEventEnd - perfData.fetchStart,
              domContentLoaded:
                perfData.domContentLoadedEventEnd - perfData.fetchStart,
              firstPaint:
                performance
                  .getEntriesByType('paint')
                  .find(entry => entry.name === 'first-paint')?.startTime || 0,
            });
          }
        }
      });
    </script>
  </body>
</html>
